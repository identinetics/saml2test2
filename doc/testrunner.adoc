# Test runner concept

Tests can be run both from scripts and a web browser. The integration fo both
approaches is facilitated by following schema.

There are following instances involved in a test:
- test target: the system to be tested;
- test tool: the system orchestrating the test by executing the test flow definition,
  and implementing the saml entity serving as a test driver;
- test runner: a light-weight client starting and stopping the test case and an
  embedded browser

Once the test tool has been started (firing up an http server), tests can be executed
in 2 ways
. interactively from the test tool's starting page
. scripted with possible interactive exchanges via the browser.

In the second case, there is following process involved:
. The test tool is started, e.g. listening on https://testserv.fed-lab.org
. the test runner is started. It will in turn
.. establish a test session calling https://testserv.fed-lab.org/init-session
.. fork a subprocess, starting "firefox -url https://testserv.fed-lab.org/<flowname>?testsession=1234568"
.. wait for the test session to complete: GET https://testserv.fed-lab.org/wait?testsession=1234568"
. The test tool will execute the test flow, talking to either the firefox or handling
  http-exchanges with the internal robobrowser.
. once the flow is complete, it will return the result as application/json to the test runner (as reponse
  to the wait/testsession=12345678 GET request)
. the test runner will kill the subprocess and output the result.